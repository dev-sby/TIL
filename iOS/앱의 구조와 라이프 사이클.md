# iOS 앱의 구조와 라이프 사이트

## 앱의 프로세스 구조

### 1. 엔트리 포인트 (UIApplicationMain)

* 기본적으로 만들어지는 main()함수에서 UIApplicationMain을 호출
* 시스템으로부터 전달받은 두 개의 인자값과 AppDelegate 클래스를 이용하여 UIApplicationMain()함수 호출
* 결과로 UIApplication 객체를 반환
* 생성된 UIApplication 객체는 UIKit 프레임워크에 속해있으므로 이후 앱 제어권은 UIKit 프레임워크로 이동

```swift
#import <UIKit/UIKit.h>
#import "AppDelegate.h"

int main(int argc, char *argv[]){
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFormClass) [AppDelegate class]))
    }
}
```
---
* UIApplicationMain() 함수
  - iOS 앱에 속하는 부분의 엔트리 포인트
  - 앱의 핵심 객체를 생성하는 프로세스를 핸들링
  - storyboard 파일 -> 앱의 유저 인터페이스를 읽어들임 & 커스텀 코드 호출 -> 앱 생성 초기에 필요한 설정 구현
  - 이벤트를 입력받기 위한 이벤트 루프 실행

<br>

* UIApplication을 생성
  - 앱의 본체라고 할 수 있는 객체
  - 커스텀 코드, 객체, 앱의 기능 모두 UIApplication에 포함되어 있는 하위 객체임
  - 모바일 디바이스에 설치된 앱을 실행하면 초기 구동 과정을 거쳐 앱 프로세스가 메모리에 등록되는데, 이 때의 앱 프로세스가 곧 UIApplication 객체라고 보아도 됨
  
<br>

* UIApplication 객체의 역할
  - 이벤트 루프, 다른 높은 수준의 앱 동작을 관리
  - 푸시 알림과 같은 특수한 이벤트를 커스텀 객체(Delegate)에게 알려주기도 함
  - 보통 서브 클래싱 없이 그대로 사용하는데, 서브 클래싱이 필요한 경우 UIApplication 객체는 AppDelegate를 대리 객체로 내세우고 커스텀 코드를 처리할 수 있도록 약간의 권한을 부여함

<br>

* AppDelegate 객체
  - iOS 앱 내에서 오직 하나의 인스턴스만 생성되도록 시스템적으로 보장받음
  - 앱 전체의 생명 주기를 함께 함
  - **AppDelegate 객체에 데이터를 저장하면 앱을 종료할 때까지 계속 데이터를 유지**
  - 앱의 초기 데이터 구조를 설정하기 위해 사용되기도 함

<br>

### 2. iOS 13 이상 앱의 라이플 사이클 : Scene에 의한 라이프 사이클
* scene은 기기에서 실행 중인 앱 UI의 한 인스턴스를 의미(사용자는 한 앱을 동시에 여러 개 실행 가능)
* 유저는 각 앱에 대해 여러 Scene을 만들고 각 Scene마다 다른 상태가 될 수 있음
* 하나의 앱은 여러 개의 Scene을 갖을 수 있으며, 새로운 Scene을 만들어 달라고 요청하면 unattached상태로 만듦

---
<br>

## 코코아 터치 프레임 워크(CocoaTouch Framework)

<br>

`추후 업데이트`

<br>

---

### 참고 자료

[UIKit](https://developer.apple.com/documentation/uikit)

[Cocoa Application Layer](https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/OSX_Technology_Overview/CocoaApplicationLayer/CocoaApplicationLayer.html#//apple_ref/doc/uid/TP40001067-CH274-SW1)

[iOS-앱의-구조와-코코아-터치-프레임워크](https://hi0seon.tistory.com/entry/Swift-2-iOS-앱의-구조와-코코아-터치-프레임워크)

[iOS) UIKit / Foundation / Cocoa / Cocoa Touch](https://babbab2.tistory.com/51)